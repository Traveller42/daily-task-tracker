window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})(window.console=window.console||{});$(document).ready(function(){var g=0,s="",q="has_value",r=$(".increment"),b=$(".task_title"),f;function a(t){$(t).each(function(){$(this).find("label").attr("for","field_"+g);$(this).find(":input").attr("id","field_"+g).attr("name","field_"+g);g++})}function d(){var t=$("#tasks tbody tr").length+1;$("tbody").append('<tr id="task_'+t+'">'+s+"</tr>");var u=$("#task_"+t+" .title, #task_"+t+" .inc");a(u);$(".task_title:last-child").focus()}function m(){var u=$("#tasks_form").serializeArray(),t={rows:$("tbody tr").length};u.unshift(t);localStorage.dtt=JSON.stringify(u);return false}function k(){var v="Task Title, Time Spent",t,w,u=v+"\n";$("tbody tr").each(function(){t=$(this).find(".task_title").val();w=$(this).find(".task_total").text();u=u+'"'+t+'", '+w+"\n"});$("#download_csv").attr("href","export.php?data="+encodeURIComponent(u))}(function e(){var w=r.html(),u="";for(var t=1;t<12;t++){u+='<td id="tc_'+t+'" class="t_inc">'+w+"</td>"}r.replaceWith(u);var v=$("#task_1 .title, #task_1 .inc");s=$("#task_1").html();a(v)}());(function i(){var z=new Date(),u=z.getMonth(),w=u+1,x=z.getDate(),B=z.getFullYear(),t=["January","February","March","April","May","June","July","August","September","October","November","December"],C=z.getDay(),v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A;if(x<10){A="0"+x}if(w<10){w="0"+w}$("#today time").attr("datetime",B+"-"+w+"-"+A).text(v[C]+", "+t[u]+" "+x+", "+B)}());(function c(){if(localStorage.dtt){var y=JSON.parse(localStorage.dtt),A=y[0].rows;if(A>1){for(var t=1;t<A;t++){d()}}for(var v=0;v<y.length;v++){var w=$("#"+y[v].name);if(w.is("textarea")){if(y[v].value){w.text(y[v].value);w.addClass(q)}}else{w.attr("checked","checked");w.prev().addClass("active")}}var u;$("tbody tr").each(function(){u=$(this).find("input:checked").length*0.25;$(this).find(".task_total").text(u)});var z=$("body").find("input:checked").length*0.25;$("#day_total").text(z);k()}}());(function h(){$(".inc").live("click",function(z){var y=$(this).find("label"),x=$(this).find("input");function u(A,B){if(A.hasClass("active")){A.removeClass("active");B.removeAttr("checked")}else{A.addClass("active");B.attr("checked","checked")}}u(y,x);var v=$(this).parents("tr"),t=v.find("input:checked").length*0.25,w=$("body").find("input:checked").length*0.25;$(v).find(".task_total").text(t);$("#day_total").text(w);m();k();f=x.attr("id");return false})}());(function p(){$("#add_task").click(function(){d()});$(document).keydown(function(t){if(t.shiftKey&&t.keyCode===13){d();return false}})}());(function j(){$(".delete_task").live("click",function(){$(this).parents("tr").remove();g=0;var t=$(".title, .inc");a(t);m();k();return false})}());(function o(){b.live("blur",function(){if($(this).val()){$(this).addClass(q)}else{$(this).removeClass(q)}});b.live("focus",function(){$(this).removeClass(q)});b.live("keyup",function(){m();k()});b.live("keypress",function(t){if(t.keyCode===13){$(this).blur()}})}());(function n(){$("#clear_data").click(function(){$("tbody tr:not(#task_1)").remove();$(":input").val("").removeAttr("checked").removeClass(q);$(".inc label").removeClass("active");$(".task_total, #day_total").text("0");delete localStorage.dtt;k();return false})}());(function n(){$("form").submit(function(){return false})}());(function l(){var t=$(".instructions");t.hide();$(".help").click(function(){if(t.css("display")==="none"){t.css("display","block")}else{t.css("display","none")}})}())});